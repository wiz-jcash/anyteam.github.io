# add\_order

_Методы возвращают значения **только** тех ключей, которые необходимы, остальные остаются пустыми._

## order params representation \(full callback message\)

!!! info "Параметры ордера системы Any.Money" **account\_amount**сумма списания/зачисления, за вычетом комиссии**address**криптоадрес для оплаты пользователем в криптовалюте. При отплате несколькими платежами возвращается адрес последнего из них**amount\_paid**параметр, возвращаемый только SCI методами, содержит сумму совершенных оплат в рамках sci-платежа**code**\[репрезентация данных кода\]\(add\_code.md\)**confirmations**количество подтверждений \(подтвержденных блоков\) для ордеров с участием криптовалют**ctime**время создания ордера \(timestamp\)**email**адрес электронной почты для отправки уведомлений об изменении состояния \*\*invoice\*\*-платежа**externalid**уникальный идентификатор, заданный мерчантом**front\_params**\[перечень параметров мерчанта\]\(\#front\_params\_description\) для настройки внешнего вида frontend в формате json объекта {ключ: значение} \(только для ордеров типа \*\*invoice\*\*\)**ftime**время финализирования ордера \(timestamp\)**in\_amount**сумма пополнения**in\_curr**валюта пополнения**in\_fee\_amount**сумма комиссии в валюте пополнения**is\_multipay**флаг возможности доплаты, возврата средств, возврата переплаты по \*\*invoice\*\*-платежу**lid**локальный идентификатор ордера**merchant\_payfee**доля комиссии за поступления, которую оплачивает мерчант \(значения в интервале \[0..1\] c точностью до двух знаков после запятой\)**orig\_amount**оригинальная \(целевая\) сумма ордера \(была заказана при создании ордера\)**out\_amount**сумма зачисления для данного ордера**out\_curr**валюта зачисления**out\_fee\_amount**сумма комиссии в валюте зачисления**owner**идентификатор мерчанта, создавшего ордер**payer**идентификатор плательщика**paylink**поле, присущие только ордерам \*\*invoice\*\*. Содержит ссылку, ведущую на страницу оплаты**payway\_name**имя платежной системы, используемой ордером. Заполняется только для singlepay платежей, а для multipay остаётся пустым \(\`"btc", "perfect", "qiwi"...\` и т.д.\)**rate**курс обмена валют, если проводилась конвертация. В формате \`"rate": \["25.30301", "1"\]\`**redirect\_url**URL, используемый во frontend для переадресации по умолчанию**ref**внутренний идентификатор ордера. Для операций с криптовалютами совпадает с \*\*tx\_id\*\***renumeration**пересчитанная сумма \(для ордеров \*\*payout\*\*, если ордер был пересчитан\), сумма возврата \(для ордера \*\*invoice\*\*, если он оплачен с переплатой\)**reqdata**оригинальные данные запроса в виде набора {ключ: значение}. Пример: \`{amount: 10, externalid: 1556712010408, in\_curr:UAH, out\_curr:UAH, payway:privat24, userdata: {payee:4444444444444448}}\`**status**актуальный \[статус ордера\]\(\#status\_description\)**tgt**мерчант, получатель платежа \(для операций типа \*\*transfer\*\*\)**token**уникальный ключ-идентификатор ордера**tp**тип ордера \(Возможные варианты: \*\*payin\*\*, \*\*autopayin\*\*, \*\*coderedeem\*\*, \*\*payout\*\*, \*\*convert\*\*, \*\*transfer\*\*, \*\*invoice\*\*, \*\*sci\_subpay\*\*, \*\*sci\_refund\*\*\)**txid**идентификатор транзакции с участием криптовалют \(значение \*\*true\*\* = в транзакции используется криптовалюта, \*\*false\*\* = только фиатные валюты\)**uaccount**платежные реквизиты получателя платежа \(для операций типов \*\*invoice\*\*, \*\*payout\*\*\)**userdata**реквизиты получателя платежа \(при использовании внешних платежных систем \`{"payee": 4444444444444448}\`\)

## restricted callback message representation

Сокращённое callback-сообщение, возвращаемое для ордеров типа **autopayin**.

!!! info "Репрезентация сокращённого callback-сообщения" **account\_amount**сумма зачисления, за вычетом комиссии**confirmations**количество подтверждений \(подтверждённых блоков\)**ctime**время создания ордера \(timestamp\)**ftime**время финализирования ордера \(timestamp\)**in\_amount**сумма пополнения**in\_curr**валюта пополнения**in\_fee\_amount**сумма комиссии в валюте пополнения**lid**локальный идентификатор ордера**out\_amount**сумма зачисления**out\_curr**валюта зачисления**out\_fee\_amount**сумма комиссии в валюте зачисления**payway\_name**наименование используемой платёжной системы**status**актуальный \[статус ордера\]\(\#status\_description\)**tp**тип ордера \(\*\*autopayin\*\*\)**txid**идентификатор транзакции с участием криптовалют \(для ордеров с оплатой криптовалютой имеет значение \*\*true\*\*\)

### front\_params fields description

!!! info "Описание полей параметра **front\_params**" **logo**кастомный логотип для SCI \(мерчант выбирает сам логотип для отображеия на SCI вместо стандартного лого ANYMONEY\). Формат: изображение, конвертированное в формате base64. Пример: \`logo: "data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVV...." \`**theme**задаёт режим день/ночь для SCI \(значения: “night”, “day”, ”auto”\)**theme\_color**задаёт цветовую тему для элементов SCI, которую выбирает мерчант. Формат: “violet”, “yellow”, “red” и т.д.

### order statuses description

!!! info "Возможные состояния ордера"

| status | final | description |
| ---: | :---: | :--- |
| abnormal | no | не определен \(ошибка\) |
| canceled | yes | отменен пользователем |
| done | yes | завершен успешно |
| expired | yes | истекло "временя жизни" \(превышен **lifetime** или **expiry**\) ордера |
| fail | yes | завершен неуспешно |
| finalizing | no | в состоянии конвертации из валют поступления в валюту зачисления инвойса |
| new | no | принят на выполнение |
| pending | no | ожидает выполнения |
| reject | yes | отказано |
| retry | no | выполнение после ошибки |
| started | no | в процессе выполнения |
| wait | no | ожидает завершения |

