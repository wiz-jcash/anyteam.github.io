# transfer

Используя методы модели **transfer** мерчант может:

1. Создать ордера перевода средств методом [transfer.create](transfer.md#transfer_create);  
2. Рассчитать предварительные параметры перевода - [transfer.calc](transfer.md#transfer_calc);  
3. Получить информацию о выбранном переводе - [transfer.get](transfer.md#transfer_get)

## endpoint

Запросы на работу методов модели отправляются на endpoint **`https://api.any.money/`**.

## transfer.create

Метод создания ордера перевода средств между балансами мерчантов. Если в запросе не указана валюта пополнения, то для расчета применяется такая же **in\_curr** мерчанта-плательщика, как и **out\_curr** запроса.

??? abstract "Входящие параметры метода"

| param | required | example | description |
| ---: | :---: | :--- | :--- |
| amount | yes | "435345,34" | сумма перевода в валюте зачисления |
| callback\_url | no | "[https://any\_money.callback.com](https://any_money.callback.com)" | url-адрес, на который будет автоматически отправляться информация про изменения состояния ордера, [формат уведомлений](add_order.md#order_repr) |
| externalid | yes | "123" | уникальный идентификатор, заданный мерчантом |
| in\_curr | no | "UAH" | валюта пополнения |
| out\_curr | yes | "USD" | валюта зачисления |
| tgt | yes | "1056" | адресат трансфера средств, \(**lid** мерчанта, которому адресован перевод\) |

!!! warning "Внимание!" Для типизированных мерчантов переданный тип получателя **tgt** должен совпадать с типом мерчанта-плательщика, а **in\_curr** должна быть равной **out\_curr** или отсутствовать, иначе будут возвращены ошибки

!!! warning "Внимание!" Сразу после поступления запроса создается ордер и вызывается его обработка, а после выполнения метода **деньги будут списаны с баланса**

!!! success "Данные ответа метода" [репрезентация параметров ордера](add_order.md) операции типа **transfer**

??? failure "Возможные возвращаемые ошибки" **EParamAmountFormatInvalid**неправильный формат параметра \*\*amount\*\***EParamAmountTooBig**\*\*amount\*\* больше максимальной суммы операции трансфера**EParamAmountTooSmall**\*\*amount\*\* меньше минимальной суммы операции трансфера**EParamCurrencyInvalid**не передан \*\*out\_curr параметр\*\*, либо указана несуществующая валюта**EParamFieldInvalid**передан невалидный параметр \*\*callback\_url\*\***EParamInvalid**

## transfer.calc

Метод расчета параметров ордера перевода средств при известной сумме.

Если в запросе не указана валюта пополнения, то для расчета будет применена такая же валюта пополнения, что и валюта зачисления \(**out\_curr**\) запроса.

Метод проводит расчет и возвращает репрезентацию параметров транзакции перевода.

??? abstract "Входящие параметры метода"

| param | required | example | description |
| ---: | :---: | :--- | :--- |
| amount | yes | "1000" | сумма трансфера |
| in\_curr | no | "USD" | валюта списания |
| out\_curr | yes | "USD" | валюта зачисления |
| tgt | no | "6489" | адресат трансфера средств \(**lid** мерчанта, которому адресован перевод\). Если параметр передан, то будет произведен расчет с учетом параметров \(индивидуальных комиссий\) получателя |

!!! warning "Внимание!" Для типизированных мерчантов переданный тип получателя **tgt** должен совпадать с типом мерчанта-плательщика, а **in\_curr** должна быть равной **out\_curr** или отсутствовать, иначе будут возвращены ошибки

!!! success "Данные ответа метода" **account\_amount**сумма, снимаемая с баланса плательщика \(\*\*in\_amount\*\*+\*\*in\_fee\_amount\*\*\)**in\_amount**сумма пополнения ордера**in\_fee\_amount**сумма комиссия ордера в валюте пополнения**orig\_amount**оригинальная сумма \(которая была заказана при создании ордера\)**out\_amount**сумма зачисления ордера**out\_fee\_amount**сумма комиссии ордера в валюте зачисления

??? failure "Возможные возвращаемые ошибки" **EParamAmountFormatInvalid**неправильный формат параметра \*\*amount\*\***EParamAmountTooBig**\*\*amount\*\* больше максимальной суммы операции трансфера**EParamAmountTooSmall**\*\*amount\*\* меньше минимальной суммы операции трансфера**EParamCurrencyInvalid**не передан \*\*out\_curr параметр\*\*, либо указана несуществующая валюта**EParamInvalid**

## transfer.get

Метод поиска и отображения ордера перевода средств между балансами мерчантов \(ордера типа **transfer**\) по его идентификатору.

??? abstract "Входящие параметры метода"

| param | required | example | description |
| ---: | :---: | :--- | :--- |
| externalid | yes | "123" | уникальный идентификатор, заданный мерчантом |

!!! success "Данные ответа метода" [репрезентация параметров ордера](add_order.md) операции типа transfer

??? failure "Возможные возвращаемые ошибки" **EParamInvalid**передано неверное значение параметра \*\*externalid\*\***EParamNotFound**не найден ордер c переданным \*\*externalid\*\*

