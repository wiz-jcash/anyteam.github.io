# anydoc\_ru

Модель содержит методы для получения квитанций по платежам в системе и для запроса их статуса.

Используя методы модели **anydoc** мерчант может:

1. Запросить квитанцию по проведенному в стистеме платежу - [anydoc.prepare\_receipt](anydoc_ru.md#anydoc_prepare_receipt)
2. Получить статус запрошенной ранее квитанции - [anydoc.receipt\_status](anydoc_ru.md#anydoc_receipt_status)

## endpoint

Запросы на работу методов модели отправляются на endpoint **`https://api.any.money/`**.

### anydoc.prepare\_receipt

Метод для размещения задачи на подготовку квитанции на проведенный в системе платёж по идентификатору его ордера.

!!! warning "Внимание!" Квитанция может быть подготовлена только по ордеру, находящемуся в [статусе](ru/add_order.md#status_description) “done“!

Созданная квитанция живёт в системе некоторое время, заданное в конфигурации сервера **anydoc** или настройках сервиса-клиента на **anydoc**. При её удалении сервису-клиенту приходит соответствующее уведомление.

??? abstract "Входящие параметры метода"

| param | required | example | description |
| ---: | :---: | :--- | :--- |
| externalid | yes | "123" | внешний идентификатор ордера, по которому запрашивается квитанция |

!!! success "Данные ответа метода" **link**ссылка на запрошенную квитанцию**order\_id**идентификатор ордера, \*\*order.id\*\***status**статус\`\*\*квитанции\*\* ордера \(“new”, “pending”, “done”, “deleted”\)

??? failure "Возможные возвращаемые ошибки" **EParamInvalid**\*\*externalid\*\* ордера не передан или передано неверное значение**EParamNotFound**ордер с таким \*\*externalid\*\* не найден в системе или ордер не принадлежит мерчанту**EParamType**неверный тип данных аргумента \*\*externalid\*\***EStateUnavailable**ордер находится в \[статусе\]\(../ru/add\_order.md\#status\_description\), отличном от “done”

### anydoc.receipt\_status

Метод для запроса статуса квитанции, подготовленной методом [anydoc.prepare\_receipt](anydoc_ru.md#anydoc_prepare_receipt).

!!! warning "Внимание!" Если передать идентификатор ордера, по которому квитанция не была предварительно создана или превысила заданное “время жизни“ и удалена, то метод возвратит пустой ответ.

??? abstract "Входящие параметры метода"

| param | required | example | description |
| ---: | :---: | :--- | :--- |
| externalid | yes | "123" | внешний идентификатор ордера, статус квитанции по которому запрашивается |

!!! success "Данные ответа метода" **link**ссылка на квитанцию, статус которой запрошен**order\_id**идентификатор ордера, \*\*order.id\*\***status**статус \*\*квитанции\*\* ордера \(“new”, “pending”, “done”, “deleted”\)

??? failure "Возможные возвращаемые ошибки" **EParamInvalid**\*\*externalid\*\* ордера не передан или передано неверное значение**EParamNotFound**ордер с таким \*\*externalid\*\* не найден в системе или ордер не принадлежит мерчанту**EParamType**неверный тип данных аргумента \*\*externalid\*\***EStateUnavailable**ордер находится в \[статусе\]\(../ru/add\_order.md\#status\_description\), отличном от “done”

